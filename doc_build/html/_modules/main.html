
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>main &#8212; KBE 1.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for main</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1"># from components import Battery</span>
<span class="sd">&quot;&quot;&quot; Explanation of Main File Here</span>


<span class="sd">@author: Şan Kılkış &amp; Nelson Johnson</span>
<span class="sd">@version: 1.0</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># TODO Add explanation of main file here</span>

<span class="kn">from</span> <span class="nn">design</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">parapy.core</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">parapy.geom</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">components</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">directories</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">definitions</span> <span class="k">import</span> <span class="o">*</span>


<span class="c1"># TODO Make sure that excel read and things are top level program features (not buried within the tree)</span>

<div class="viewcode-block" id="UAV"><a class="viewcode-back" href="../index.html#main.UAV">[docs]</a><span class="k">class</span> <span class="nc">UAV</span><span class="p">(</span><span class="n">DesignInput</span><span class="p">):</span>

    <span class="n">__icon__</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DIRS</span><span class="p">[</span><span class="s1">&#39;ICON_DIR&#39;</span><span class="p">],</span> <span class="s1">&#39;plane.png&#39;</span><span class="p">)</span>


<span class="c1">#     @Attribute</span>
<span class="c1">#     def wing_loading(self):</span>
<span class="c1">#         return self.params.wingpowerloading.designpoint[&#39;wing_loading&#39;]</span>
<span class="c1">#</span>
<span class="c1">#     @Part</span>
<span class="c1">#     def params(self):</span>
<span class="c1">#         return ParameterGenerator(label=&quot;Design Parameters&quot;)</span>
<span class="c1">#</span>
<span class="c1">#     @Part</span>
<span class="c1">#     def wing(self):</span>
<span class="c1">#         return Wing(WS_pt=self.wing_loading, position=translate(XOY, &#39;x&#39;, 0.1))</span>
<span class="c1">#</span>
<span class="c1">#     @Part</span>
<span class="c1">#     def stabilizer(self):</span>
<span class="c1">#         return VerticalStabilizer(position=translate(self.wing.position, &#39;x&#39;, 0.2))</span>
<span class="c1">#</span>
<span class="c1">#     @Part</span>
<span class="c1">#     def stability(self):</span>
<span class="c1">#         return ScissorPlot(x_cg=self.cg.x,</span>
<span class="c1">#                            x_ac=self.wing.wing.aerodynamic_center.x,</span>
<span class="c1">#                            x_lemac=self.wing.wing.lemac.x,</span>
<span class="c1">#                            mac=self.wing.wing.mac_length,</span>
<span class="c1">#                            AR=12,</span>
<span class="c1">#                            e=0.8,</span>
<span class="c1">#                            AR_h=5.0, # TODO Make this a derived input based on wing AR</span>
<span class="c1">#                            e_h=0.8,</span>
<span class="c1">#                            Cl_w=self.wing.lift_coef_control,</span>
<span class="c1">#                            C_mac=self.wing.controllability_c_m,</span>
<span class="c1">#                            Cla_w=self.wing.lift_coef_vs_alpha,</span>
<span class="c1">#                            delta_xcg=0.3,</span>
<span class="c1">#                            configuration=&#39;canard&#39;)</span>
<span class="c1"># #  TODO make relation for AR_h, and add dynamic validator.</span>
<span class="c1">#</span>
<span class="c1">#     #TODO make this from MAC to MAC</span>
<span class="c1">#     @Part</span>
<span class="c1">#     def stabilizer_h(self):</span>
<span class="c1">#         return HorizontalStabilizer(position=translate(self.wing.position,</span>
<span class="c1">#                                                        &#39;x&#39;, self.stability.lhc * self.wing.wing.mac_length),</span>
<span class="c1">#                                     S_req=self.wing.s_req * self.stability.shs_req)</span>
<span class="c1">#</span>
<span class="c1">#     @Part</span>
<span class="c1">#     def fuselage(self):</span>
<span class="c1">#         return Fuselage(compartment_type=[&#39;motor&#39;, &#39;container&#39;, &#39;container&#39;, &#39;tail&#39;],</span>
<span class="c1">#                         sizing_parts=[self.motor, [self.stabilizer_h, self.camera], [self.battery, self.wing, self.stabilizer], None])</span>
<span class="c1">#</span>
<span class="c1">#     @Part</span>
<span class="c1">#     def motor(self):</span>
<span class="c1">#         return Motor(integration=&#39;puller&#39;, position=translate(self.camera.position, &#39;x&#39;, -1, &#39;z&#39;, self.cg.z / 2.0))</span>
<span class="c1">#</span>
<span class="c1">#     @Part</span>
<span class="c1">#     def center_of_gravity(self):</span>
<span class="c1">#         return VisualCG(self.cg, self.weights[&#39;mtow&#39;])</span>
<span class="c1">#</span>
<span class="c1">#     @Part</span>
<span class="c1">#     def propeller(self):</span>
<span class="c1">#         return Propeller(self.motor)</span>
<span class="c1">#</span>
<span class="c1">#     @Attribute</span>
<span class="c1">#     def configuration(self):</span>
<span class="c1">#         return self.params.configuration</span>
<span class="c1">#</span>
<span class="c1">#     @Attribute</span>
<span class="c1">#     def mtow(self):</span>
<span class="c1">#         return self.weight_and_balance()[&#39;WEIGHTS&#39;][&#39;mtow&#39;]</span>
<span class="c1">#</span>
<span class="c1">#     @Attribute(private=True)</span>
<span class="c1">#     # TODO finish this validator attribute (make it private)</span>
<span class="c1">#     def mtow_validator(self):</span>
<span class="c1">#         return 1</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#     # @Attribute</span>
<span class="c1">#</span>
<span class="c1">#     @Attribute</span>
<span class="c1">#     def payload(self):</span>
<span class="c1">#         return self.params.weightestimator.weight_payload</span>
<span class="c1">#</span>
<span class="c1">#     @Attribute</span>
<span class="c1">#     def battery_capacity(self):</span>
<span class="c1">#         return self.sizing_value</span>
<span class="c1">#</span>
<span class="c1">#     @Part</span>
<span class="c1">#     def battery(self):</span>
<span class="c1">#         return Battery(position=translate(XOY, &#39;x&#39;, -0.1))</span>
<span class="c1">#</span>
<span class="c1">#     # @Part</span>
<span class="c1">#     # def battery_test(self):</span>
<span class="c1">#     #     return Battery(position=Position(self.cg))</span>
<span class="c1">#</span>
<span class="c1">#     @Part</span>
<span class="c1">#     def camera(self):</span>
<span class="c1">#         return EOIR(target_weight=self.payload, position=translate(XOY, &#39;x&#39;, -0.3))</span>
<span class="c1">#</span>
<span class="c1">#     # TODO Add a nice bar-graph that shows performance, power consumption, drag, etc in the GUI with boxes!</span>

    <span class="nd">@Attribute</span>
    <span class="k">def</span> <span class="nf">cg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">weight_and_balance</span><span class="p">()[</span><span class="s1">&#39;CG&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">weight_and_balance</span><span class="p">()[</span><span class="s1">&#39;CG&#39;</span><span class="p">]</span>

    <span class="nd">@Attribute</span>
    <span class="k">def</span> <span class="nf">weights</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">weight_and_balance</span><span class="p">()[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">]</span>

<div class="viewcode-block" id="UAV.parasite_drag"><a class="viewcode-back" href="../index.html#main.UAV.parasite_drag">[docs]</a>    <span class="nd">@Attribute</span>
    <span class="k">def</span> <span class="nf">parasite_drag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Utilizes Raymer&#39;s Equivalent skin-friction drag method to compute Zero-Lift Drag. The utilized value used</span>
<span class="sd">        for the skin_friction_coef is taken from subsonic, light propeller aircraft</span>

<span class="sd">        http://www.fzt.haw-hamburg.de/pers/Scholz/HOOU/AircraftDesign_13_Drag.pdf</span>

<span class="sd">        :return: Zero-Lift Drag Coefficient</span>
<span class="sd">        :rtype: Float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO Incorporate drag estimation into the knowledge base</span>
        <span class="n">skin_friction_coef</span> <span class="o">=</span> <span class="mf">0.0055</span>
        <span class="n">area_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sum_area</span><span class="p">()</span>
        <span class="n">reference_area</span> <span class="o">=</span> <span class="n">area_dict</span><span class="p">[</span><span class="s1">&#39;REFERENCE&#39;</span><span class="p">]</span>
        <span class="n">wetted_area</span> <span class="o">=</span> <span class="n">area_dict</span><span class="p">[</span><span class="s1">&#39;WETTED&#39;</span><span class="p">][</span><span class="s1">&#39;total&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">wetted_area</span> <span class="ow">and</span> <span class="n">reference_area</span> <span class="ow">is</span> <span class="ow">not</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">parasite_drag</span> <span class="o">=</span> <span class="n">skin_friction_coef</span> <span class="o">*</span> <span class="p">(</span><span class="n">wetted_area</span> <span class="o">/</span> <span class="n">reference_area</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">parasite_drag</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">parasite_drag</span></div>

    <span class="nd">@Attribute</span>
    <span class="k">def</span> <span class="nf">areas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sum_area</span><span class="p">()</span>

<div class="viewcode-block" id="UAV.weight_and_balance"><a class="viewcode-back" href="../index.html#main.UAV.weight_and_balance">[docs]</a>    <span class="k">def</span> <span class="nf">weight_and_balance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Retrieves all relevant parameters from children with `weight` and `center_of_gravity` attributes and then</span>
<span class="sd">        calculates the center of gravity w.r.t the origin Point(0, 0, 0)</span>

<span class="sd">        :return: A dictionary of component weights as well as the center of gravity fieldnames = &#39;WEIGHTS&#39;, &#39;CG&#39;</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">children</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_children</span><span class="p">()</span>

        <span class="c1"># Creating dummy lists to store all weights and respective c.g. locations</span>
        <span class="n">weight</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">cg</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Defining the structure of the weight_dictionary</span>
        <span class="n">weight_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;wing&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                                   <span class="s1">&#39;fuselage&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                                   <span class="s1">&#39;vt&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                                   <span class="s1">&#39;ht&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                                   <span class="s1">&#39;payload&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                                   <span class="s1">&#39;prop&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                                   <span class="s1">&#39;battery&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                                   <span class="s1">&#39;electronics&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                                   <span class="s1">&#39;misc&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">},</span>
                       <span class="s1">&#39;CG&#39;</span><span class="p">:</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)}</span>

        <span class="k">for</span> <span class="n">_child</span> <span class="ow">in</span> <span class="n">children</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">_child</span><span class="p">,</span> <span class="s1">&#39;weight&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">_child</span><span class="p">,</span> <span class="s1">&#39;center_of_gravity&#39;</span><span class="p">):</span>
                <span class="n">weight</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;weight&#39;</span><span class="p">))</span>
                <span class="n">cg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;center_of_gravity&#39;</span><span class="p">))</span>

                <span class="k">if</span> <span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;component_type&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;wing&#39;</span><span class="p">:</span>
                    <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">][</span><span class="s1">&#39;wing&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">][</span><span class="s1">&#39;wing&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;weight&#39;</span><span class="p">))</span>

                <span class="k">elif</span> <span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;component_type&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;fuselage&#39;</span><span class="p">:</span>
                    <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">][</span><span class="s1">&#39;fuselage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">][</span><span class="s1">&#39;fuselage&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;weight&#39;</span><span class="p">))</span>

                <span class="k">elif</span> <span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;component_type&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;vt&#39;</span><span class="p">:</span>
                    <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">][</span><span class="s1">&#39;vt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">][</span><span class="s1">&#39;vt&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;weight&#39;</span><span class="p">))</span>

                <span class="k">elif</span> <span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;component_type&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;ht&#39;</span><span class="p">:</span>
                    <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">][</span><span class="s1">&#39;ht&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">][</span><span class="s1">&#39;ht&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;weight&#39;</span><span class="p">))</span>

                <span class="k">elif</span> <span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;component_type&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;payload&#39;</span><span class="p">:</span>
                    <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">][</span><span class="s1">&#39;payload&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">][</span><span class="s1">&#39;payload&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;weight&#39;</span><span class="p">))</span>

                <span class="k">elif</span> <span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;component_type&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;prop&#39;</span><span class="p">:</span>
                    <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">][</span><span class="s1">&#39;prop&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">][</span><span class="s1">&#39;prop&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;weight&#39;</span><span class="p">))</span>

                <span class="k">elif</span> <span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;component_type&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;battery&#39;</span><span class="p">:</span>
                    <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">][</span><span class="s1">&#39;battery&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">][</span><span class="s1">&#39;battery&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;weight&#39;</span><span class="p">))</span>

                <span class="k">elif</span> <span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;component_type&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;electronics&#39;</span><span class="p">:</span>
                    <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">][</span><span class="s1">&#39;electronics&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">][</span><span class="s1">&#39;electronics&#39;</span><span class="p">]</span> <span class="o">+</span> \
                                                            <span class="p">(</span><span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;weight&#39;</span><span class="p">))</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">][</span><span class="s1">&#39;misc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">][</span><span class="s1">&#39;misc&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;weight&#39;</span><span class="p">)</span>
                    <span class="nb">print</span> <span class="ne">Warning</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> does not have an Attribute &#39;component_type&#39;&quot;</span>
                                  <span class="s2">&quot;it was thus added to the &#39;misc&#39; category in the weight_dictionary&quot;</span> <span class="o">%</span> <span class="n">_child</span><span class="p">)</span>

        <span class="n">total_weight</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span>
        <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;WEIGHTS&#39;</span><span class="p">][</span><span class="s1">&#39;mtow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">total_weight</span>

        <span class="c1"># CG calculation through a weighted average utilizing list comprehension</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">cg</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">cg_x</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">weight</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">cg</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">x</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">weight</span><span class="p">))])</span> <span class="o">/</span> <span class="n">total_weight</span>
            <span class="n">cg_y</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">weight</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">cg</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">y</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">weight</span><span class="p">))])</span> <span class="o">/</span> <span class="n">total_weight</span>
            <span class="n">cg_z</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">weight</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">cg</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">z</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">weight</span><span class="p">))])</span> <span class="o">/</span> <span class="n">total_weight</span>

            <span class="n">weight_dict</span><span class="p">[</span><span class="s1">&#39;CG&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">cg_x</span><span class="p">,</span> <span class="n">cg_y</span><span class="p">,</span> <span class="n">cg_z</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">weight_dict</span></div>

<div class="viewcode-block" id="UAV.sum_area"><a class="viewcode-back" href="../index.html#main.UAV.sum_area">[docs]</a>    <span class="k">def</span> <span class="nf">sum_area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Retrieves all wetted surface areas of instantiated children that have the attributes `wetted_area` and</span>
<span class="sd">        `planform_area` which are defined by the class `ExternalBody`. This class</span>

<span class="sd">        :return: A dictionary of wetted surface and reference area with the fieldnames: &#39;WETTED&#39; and &#39;REFERENCE&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">children</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_children</span><span class="p">()</span>

        <span class="n">areas</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">area_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;WETTED&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;wing&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s1">&#39;fuselage&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s1">&#39;vt&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s1">&#39;ht&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s1">&#39;misc&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s1">&#39;total&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                     <span class="s1">&#39;REFERENCE&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>

        <span class="k">for</span> <span class="n">_child</span> <span class="ow">in</span> <span class="n">children</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">_child</span><span class="p">,</span> <span class="s1">&#39;wetted_area&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">_child</span><span class="p">,</span> <span class="s1">&#39;planform_area&#39;</span><span class="p">):</span>
                <span class="n">areas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_child</span><span class="o">.</span><span class="n">wetted_area</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;surface_type&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;wing&#39;</span><span class="p">:</span>
                    <span class="n">area_dict</span><span class="p">[</span><span class="s1">&#39;WETTED&#39;</span><span class="p">][</span><span class="s1">&#39;wing&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">area_dict</span><span class="p">[</span><span class="s1">&#39;WETTED&#39;</span><span class="p">][</span><span class="s1">&#39;wing&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">_child</span><span class="o">.</span><span class="n">wetted_area</span>
                    <span class="n">area_dict</span><span class="p">[</span><span class="s1">&#39;REFERENCE&#39;</span><span class="p">]</span> <span class="o">=</span>  <span class="n">area_dict</span><span class="p">[</span><span class="s1">&#39;REFERENCE&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">_child</span><span class="o">.</span><span class="n">planform_area</span>

                <span class="k">elif</span> <span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;surface_type&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;fuselage&#39;</span><span class="p">:</span>
                    <span class="n">area_dict</span><span class="p">[</span><span class="s1">&#39;WETTED&#39;</span><span class="p">][</span><span class="s1">&#39;fuselage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">area_dict</span><span class="p">[</span><span class="s1">&#39;WETTED&#39;</span><span class="p">][</span><span class="s1">&#39;fuselage&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">_child</span><span class="o">.</span><span class="n">wetted_area</span>

                <span class="k">elif</span> <span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;surface_type&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;vt&#39;</span><span class="p">:</span>
                    <span class="n">area_dict</span><span class="p">[</span><span class="s1">&#39;WETTED&#39;</span><span class="p">][</span><span class="s1">&#39;vt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">area_dict</span><span class="p">[</span><span class="s1">&#39;WETTED&#39;</span><span class="p">][</span><span class="s1">&#39;vt&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">_child</span><span class="o">.</span><span class="n">wetted_area</span>

                <span class="k">elif</span> <span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;surface_type&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;vt&#39;</span><span class="p">:</span>
                    <span class="n">area_dict</span><span class="p">[</span><span class="s1">&#39;WETTED&#39;</span><span class="p">][</span><span class="s1">&#39;vt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">area_dict</span><span class="p">[</span><span class="s1">&#39;WETTED&#39;</span><span class="p">][</span><span class="s1">&#39;vt&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">_child</span><span class="o">.</span><span class="n">wetted_area</span>

                <span class="k">elif</span> <span class="n">_child</span><span class="o">.</span><span class="n">getslot</span><span class="p">(</span><span class="s1">&#39;surface_type&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;ht&#39;</span><span class="p">:</span>
                    <span class="n">area_dict</span><span class="p">[</span><span class="s1">&#39;WETTED&#39;</span><span class="p">][</span><span class="s1">&#39;ht&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">area_dict</span><span class="p">[</span><span class="s1">&#39;WETTED&#39;</span><span class="p">][</span><span class="s1">&#39;ht&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">_child</span><span class="o">.</span><span class="n">wetted_area</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="n">area_dict</span><span class="p">[</span><span class="s1">&#39;WETTED&#39;</span><span class="p">][</span><span class="s1">&#39;misc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">area_dict</span><span class="p">[</span><span class="s1">&#39;WETTED&#39;</span><span class="p">][</span><span class="s1">&#39;misc&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">_child</span><span class="o">.</span><span class="n">wetted_area</span>
                    <span class="nb">print</span> <span class="ne">Warning</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> does not have an Attribute &#39;surface_type&#39;&quot;</span>
                                  <span class="s2">&quot;it was thus added to the &#39;misc&#39; category in the area_dictionary&quot;</span> <span class="o">%</span> <span class="n">_child</span><span class="p">)</span>
        <span class="n">area_dict</span><span class="p">[</span><span class="s1">&#39;WETTED&#39;</span><span class="p">][</span><span class="s1">&#39;total&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">areas</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">area_dict</span></div></div>

    <span class="c1"># def validate_geometry(self):</span>
    <span class="c1">#     children = self.get_children()</span>
    <span class="c1">#     x_loc_max = 0</span>
    <span class="c1">#     x_loc_min = 0</span>
    <span class="c1">#     index_first = 0</span>
    <span class="c1">#     index_last = 0</span>
    <span class="c1">#     for _child in children:</span>
    <span class="c1">#         if hasattr(_child, &#39;internal_shape&#39;) and getslot(_child, &#39;component_type&#39;) != &#39;motor&#39;:</span>
    <span class="c1">#             # Above is the identification of a Motor</span>
    <span class="c1">#             current_corners = _child.internal_shape.bbox.corners</span>
    <span class="c1">#             if current_corners[1].x &gt; x_loc_max:</span>
    <span class="c1">#                 x_loc_max = current_corners[1].x</span>
    <span class="c1">#             elif current_corners[0].x &lt; x_loc_min:</span>
    <span class="c1">#                 x_loc_min = current_corners[0].x</span>
    <span class="c1">#     return x_loc_min, x_loc_max</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">parapy.gui</span> <span class="k">import</span> <span class="n">display</span>

    <span class="n">obj</span> <span class="o">=</span> <span class="n">UAV</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;myUAV&#39;</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, San Kilkis, Nelson Johnson.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
    </div>

    

    
  </body>
</html>